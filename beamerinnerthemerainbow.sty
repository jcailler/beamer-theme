\RequirePackage{fontawesome5}
\RequirePackage{mdframed}

%% Items/enumerates/descriptions
\setbeamertemplate{itemize item}{\usebeamerfont{itemize item}\usebeamercolor[fg]{itemize item}$\ast$}
\setbeamertemplate{itemize subitem}{\usebeamerfont{itemize item}\usebeamercolor[fg]{itemize item}$\ast$}
\setbeamertemplate{itemize subsubitem}{\usebeamerfont{itemize item}\usebeamercolor[fg]{itemize item}$\ast$}

%% Blocks
% \setbeamertemplate{blocks}[rounded][shadow=false]
\newmdenv[
	topline=false,
	bottomline=false,
	rightline=false,
	leftmargin=-10pt,
	innerleftmargin=5pt,
	innerrightmargin=5pt,
	innertopmargin=-1pt,
	innerbottommargin=5pt,
	linewidth=3pt,
	backgroundcolor=oldwhite
]{mdleftrule}

\newenvironment<>{internal@block}[3]{%
	\xdef\internal@block@argthree@end{#3 end}
	{\usebeamercolor*[fg]{#1}}
	\actionenv#4%
	\mdleftrule[linecolor={#1.fg}, backgroundcolor={#1.fg!8!white}]%
	\def\insertblocktitle{\raisebox{1pt}{\scriptsize\blockicon}\ #2}%
	\usebeamertemplate{#3 begin}}
{%
	\usebeamertemplate{\internal@block@argthree@end}%
	\endmdleftrule%
	\endactionenv%
}

\renewenvironment<>{block}[1]{%
	\@ifundefined{blockicon}{\def\blockicon{\faInfoCircle\kern0.3ex}}{}%
	\internal@block#2{block title}{#1}{block}}{\endinternal@block\let\blockicon\undefined}
\renewenvironment<>{exampleblock}[1]{%
	\@ifundefined{blockicon}{\def\blockicon{\faCommentDots\kern0.3ex}}{}%
	\internal@block#2{block title example}{#1}{block example}}{\endinternal@block\let\blockicon\undefined}
\renewenvironment<>{alertblock}[1]{%
	\@ifundefined{blockicon}{\def\blockicon{\faExclamationTriangle\kern0.3ex}}{}%
	\internal@block#2{block title alerted}{#1}{block alerted}}{\endinternal@block\let\blockicon\undefined}

% TODO: change the icons for theorems/proofs
\setbeamertemplate{theorem begin}{
	\let\blockicon\theoremicon%
	\begin{\inserttheoremblockenv}{%
		%\inserttheoremheadfont
		\usebeamerfont*{block title}%
		\inserttheoremname%
		\ifx\inserttheoremaddition\@empty\else\ (\inserttheoremaddition)\fi%
	}%
}
\setbeamertemplate{proof begin}{%
	\def\blockicon{\faCog\kern0.2ex}%
	{\usebeamercolor*[fg]{proof title}}%
	\setbeamercolor*{block title}{fg=proof title.fg}%
	\block{\insertproofname}%
}
\setbeamertemplate{proof end}{%
	\endblock%
}

\setbeamertemplate{button}{%
	\begingroup%
	\usebeamercolor*[bg]{button border}\usebeamercolor*{button}%
	\tikz\node[
		inner xsep=4pt,
		draw=button border.bg,
		fill=button.bg,
		text=button.fg,
		rounded corners=4pt,
		minimum height=1.8em]  {\usebeamerfont*{button}\insertbuttontext};%
	\endgroup}


